// Generated by CoffeeScript 1.3.1
(function() {

  define(["smog/server", "templates/navigation", "smog/notify"], function(server, templ, notify) {
    return function() {
      return server.getCollections(function(err, coll) {
        var it;
        if (err != null) {
          return notify.error("Error grabbing collections: " + err);
        }
        coll = (function() {
          var _i, _len, _results;
          _results = [];
          for (_i = 0, _len = coll.length; _i < _len; _i++) {
            it = coll[_i];
            _results.push(it.name.substring(it.name.indexOf('.') + 1));
          }
          return _results;
        })();
        $('#navigation').html(templ({
          collections: coll
        }));
        return $('#content').html('');
      });
    };
  });

}).call(this);
